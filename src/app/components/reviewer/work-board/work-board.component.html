<div class="container" *ngIf="!loading">
  <div class="row" *ngIf="!selRevCertification">
    <div class="col-8">
      <h4 class="page-header">Work Board</h4>
      <p-table #dt1 [value]="certifications" selectionMode="single" [loading]="loading" [rows]="10" [autoLayout]="true" [paginator]="true" [pageLinks]="5" [resizableColumns]="true" [globalFilterFields]="['status']">
        <ng-template pTemplate="caption">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <div class="w-50 d-flex">
              <div *ngFor="let status of statuses" class="pr-3">
                <p-badge styleClass="p-badge-dot" severity="{{status['severity']}}"></p-badge>
                <span class="pl-2 p-text-italic">{{status['count'] + ' ' +status['name']}}</span>
              </div>
            </div>

            <p-dropdown [options]="statuses" optionLabel="name" optionValue="value" placeholder="Select a Status" [showClear]="true" (onChange)="dt1.filterGlobal($event['value'], 'contains')">
            </p-dropdown>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th>No.</th>
            <th pSortableColumn="certId">Certification ID <p-sortIcon field="certId"></p-sortIcon>
            </th>
            <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon>
            </th>
            <th pSortableColumn="date">Date <p-sortIcon field="date"></p-sortIcon>
            </th>
            <th pSortableColumn="renewableEnergy">Sector <p-sortIcon field="renewableEnergy"></p-sortIcon>
            </th>
            <th pSortableColumn="status">Status <p-sortIcon field="status"></p-sortIcon>
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-list>
          <tr>
            <td>{{list.no}}</td>
            <td>{{list.certId}}</td>
            <td>{{list.name | titlecase}}</td>
            <td>{{list.date | date: 'dd/MM/YYYY'}}</td>
            <td>{{list.renewableEnergy | titlecase}}</td>
            <td ngClass="{{list.status + ' status-text'}}">
              <span class="link" (click)="reviewCertification(list)">
                {{list.status === 'in-review' ? 'Under-Review' : list.status | titlecase}}
              </span> </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage" let-columns>
          <tr>
            <td class="p-5 text-center" colspan="7">
              No Certifications Found
            </td>
          </tr>
        </ng-template>
      </p-table>

    </div>
    <div class="col-4 side-info">
      <div class="personal-workspace">
        <h6>Personal Workspace <i class="pi pi-save" (click)="savePSpace()"></i></h6>
        <ngx-wig [(ngModel)]="pworkSpace">
        </ngx-wig>
      </div>
      <div class="recent-cases">
        <h6>Recent Cases</h6>
        <div *ngFor="let case of recentCases" class="case">
          <div>
            <div class="case__id"> {{case['certificationId']}}</div>
            <div class="case__name">{{case['uniqueName']}}</div>
          </div>
          <div>{{case['approvedDate'] | date:'dd/MM/YYYY'}}</div>
        </div>
      </div>
    </div>
  </div>
  <div class="row" *ngIf="selRevCertification">
    <div class="col-4">
      <div class="doc-list">
        <h6 class="heading">Pre-Issuance Documentation</h6>
        <div class="doc-list__item">
          <div class="d-flex">
            <i class="fa fa-check-circle"></i>
            <span class="doc-list__item__name">Assurance Report</span>
          </div>
          <button class="btn btn-wg" (click)="reviewReport(selRevCertification['caAssuranceReport'])">Review</button>
        </div>
        <div class="doc-list__item">
          <div class="d-flex">
            <i class="fa fa-check-circle"></i>
            <span class="doc-list__item__name">Assurance Report</span>
          </div>
          <button class="btn btn-wg" (click)="reviewReport(selRevCertification['caAssuranceReport'])">Review</button>
        </div>
        <div class="doc-list__item">
          <div class="d-flex">
            <i class="fa fa-check-circle"></i>
            <span class="doc-list__item__name">Assurance Report</span>
          </div>
          <button class="btn btn-wg" (click)="reviewReport(selRevCertification['caAssuranceReport'])">Review</button>
        </div>
        <div class="doc-list__item">
          <div class="d-flex">
            <i class="fa fa-check-circle"></i>
            <span class="doc-list__item__name">Assurance Report</span>
          </div>
          <button class="btn btn-wg" (click)="reviewReport(selRevCertification['caAssuranceReport'])">Review</button>
        </div>
      </div>
    </div>
    <div class="col-8"></div>
  </div>
</div>
